paths:
  /provider-models:
    get:
      tags:
        - Provider Models
      security:
        - bearerAuth: []
      summary: Get all provider models
      description: Retrieve a list of all provider models
      responses:
        "200":
          description: Successfully retrieved provider models
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ProviderModel"
        "500":
          $ref: "#/components/schemas/Error"

    post:
      tags:
        - Provider Models
      security:
        - bearerAuth: []
      summary: Create a new provider model
      description: Add a new AI provider model to the system
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProviderModelDto"
            examples:
              create_provider_model:
                summary: Create provider model
                value:
                  provider: "openai"
                  model_name: "gpt-4-turbo"
      responses:
        "201":
          description: Provider model created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
                properties:
                  data:
                    $ref: "#/components/schemas/ProviderModel"
        "409":
          $ref: "#/components/schemas/Error"
        "500":
          $ref: "#/components/schemas/Error"

  /provider-models/provider/{provider}:
    get:
      tags:
        - Provider Models
      security:
        - bearerAuth: []
      summary: Get models by provider
      description: Retrieve all models for a specific provider
      parameters:
        - in: path
          name: provider
          required: true
          schema:
            type: string
          description: The name of the provider
      responses:
        "200":
          description: Successfully retrieved provider models
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ProviderModel"
        "500":
          $ref: "#/components/schemas/Error"

  /provider-models/{id}:
    get:
      tags:
        - Provider Models
      security:
        - bearerAuth: []
      summary: Get provider model by ID
      description: Retrieve a specific provider model by its ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: The ID of the provider model
      responses:
        "200":
          description: Successfully retrieved provider model
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
                properties:
                  data:
                    $ref: "#/components/schemas/ProviderModel"
        "404":
          $ref: "#/components/schemas/Error"
        "500":
          $ref: "#/components/schemas/Error"

    put:
      tags:
        - Provider Models
      security:
        - bearerAuth: []
      summary: Update provider model
      description: Update an existing provider model
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: The ID of the provider model to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateProviderModelDto"
            examples:
              update_provider_model:
                summary: Update provider model name
                value:
                  model_name: "gpt-4o"
      responses:
        "200":
          description: Provider model updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
                properties:
                  data:
                    $ref: "#/components/schemas/ProviderModel"
        "404":
          $ref: "#/components/schemas/Error"
        "409":
          $ref: "#/components/schemas/Error"
        "500":
          $ref: "#/components/schemas/Error"

    delete:
      tags:
        - Provider Models
      security:
        - bearerAuth: []
      summary: Delete provider model
      description: Soft delete a provider model
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: The ID of the provider model to delete
      responses:
        "200":
          description: Provider model deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "404":
          $ref: "#/components/schemas/Error"
        "500":
          $ref: "#/components/schemas/Error"

components:
  schemas:
    ProviderModel:
      type: object
      required:
        - id
        - provider
        - model_name
        - created_by
        - created_at
        - is_deleted
      properties:
        id:
          type: integer
          description: The unique identifier for the provider model
        provider:
          type: string
          description: The name of the AI provider (e.g., openai, claude, gemini, groq)
        model_name:
          type: string
          description: The name of the model
        created_by:
          type: integer
          description: User ID who created the model
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        updated_by:
          type: integer
          nullable: true
          description: User ID who last updated the model
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
        is_deleted:
          type: boolean
          description: Soft delete flag
          default: false
        deleted_by:
          type: integer
          nullable: true
          description: User ID who deleted the model
        deleted_at:
          type: string
          format: date-time
          nullable: true
          description: Soft delete timestamp

    CreateProviderModelDto:
      type: object
      required:
        - provider
        - model_name
      properties:
        provider:
          type: string
          description: The name of the AI provider
          example: "groq"
        model_name:
          type: string
          description: The name of the model
          example: "meta-llama/llama-4-scout-17b-16e-instruct"

    UpdateProviderModelDto:
      type: object
      properties:
        provider:
          type: string
          description: Updated provider name
          example: "groq"
        model_name:
          type: string
          description: Updated model name
          example: "meta-llama/llama-4-scout-17b-16e-instruct"
